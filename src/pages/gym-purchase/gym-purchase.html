<ion-header>
  <ion-navbar hideBackButton="{{isPurchaseDone}}">
    <ion-title>{{isPurchaseDone? 'Compra Exitosa' : 'Comprar'}}</ion-title>
  </ion-navbar>
  <navbar-bump></navbar-bump>
</ion-header>


<ion-content padding>
  <div *ngIf="!isPurchaseDone">
    <ion-item text-center>
      <h1><b>Bonga GYM</b></h1>
      <img src="assets/img/example/bonga.jpg">
      <h2>Monto: <span ion-text color="danger">$69.00 MXN</span></h2>
    </ion-item>
    <button ion-item detail-none text-center *ngIf="cards.length" (tap)="showCardAlert()" text-wrap>
      <h3>Tarjeta</h3>
      <h2> {{selectedCard.card.brand}} {{selectedCard.card.card_number}}</h2>
    </button>
    <ion-item *ngIf="cards.length" text-center>
      <small>
        <a (tap)="addCardPage()">Agregar nueva Tarjeta</a>
      </small>
    </ion-item>
    <ion-item text-center no-lines *ngIf="!cards.length">
      <ion-list-header>Agregar Tarjeta</ion-list-header>
      <liberi-button name="plus" (tap)="addCardPage()"></liberi-button>
    </ion-item>
  </div>

  <div *ngIf="isPurchaseDone">
    <div text-center>
      <img [src]="'https://api.qrserver.com/v1/create-qr-code/?size=550x550&data=' + generated_code" class="qr-code" style="width: 40%;">
      <br />
      <b>{{generated_code}}</b>
    </div>
    <ion-item text-center text-wrap no-lines>
      <ion-list-header><b>Tu compra ha sido registrada correctamente</b></ion-list-header>
    </ion-item>

      <div class="text-container">
          <ion-item text-center text-wrap class="text-box-outline">
              <p>Puedes consultar los detalles de tu compra en tu <b>HISTORIAL DE COMPRAS</b>. Una copia de tu compra tu y el código QR de acceso se envió a tu correo electrónico.</p>
          </ion-item>
      </div>
  </div>

  <br><br>
  <div text-center *ngIf="cards.length">
    <liberi-button name="check-blue" (click)="!isPurchaseDone ? purchase() : dismiss()"></liberi-button>
  </div>
</ion-content>
<ion-footer no-shadow>
  <div class="liberi-logo-line"></div>
  <ion-toolbar position="bottom"></ion-toolbar>
</ion-footer>
