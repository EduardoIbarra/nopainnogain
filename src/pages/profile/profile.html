<ion-header>
  <ion-navbar>
    <button ion-button menuToggle="left">
      <ion-icon name="arrow-back"></ion-icon>
    </button>
    <ion-title>DATOS PERSONALES</ion-title>
  </ion-navbar>
  <navbar-bump></navbar-bump>
</ion-header>


<ion-content padding>
  <br>
  <form [formGroup]="RegisterForm1">
    <br/>
    <ion-list-header text-wrap text-center class="title-border-bottom">Datos Personales</ion-list-header>
    <ion-item>
      <ion-label floating color="primary">Nombre</ion-label>
      <ion-input type="text" formControlName="name" [(ngModel)]="RegisterFormData.name" [class.invalid]="!RegisterForm1.controls.name.valid && (RegisterForm1.controls.name.dirty || submitAttemptForm1)"
        [class.valid]="RegisterForm1.controls.name.valid"></ion-input>
      <ion-icon item-end name="person" color="primary"></ion-icon>
    </ion-item>
    <ion-item *ngIf="!RegisterForm1.controls.name.valid  && (RegisterForm1.controls.name.dirty || submitAttemptForm1)">
      <p class="error-message">Ingresa un nombre válido</p>
    </ion-item>

    <ion-item>
      <ion-label floating color="primary">Apellidos</ion-label>
      <ion-input type="text" formControlName="last_name" [(ngModel)]="RegisterFormData.last_name" [class.invalid]="!RegisterForm1.controls.last_name.valid && (RegisterForm1.controls.last_name.dirty || submitAttemptForm1)"
        [class.valid]="RegisterForm1.controls.last_name.valid"></ion-input>
      <ion-icon item-end name="person" color="primary"></ion-icon>
    </ion-item>
    <ion-item *ngIf="!RegisterForm1.controls.last_name.valid  && (RegisterForm1.controls.last_name.dirty || submitAttemptForm1)">
      <p class="error-message">Ingresa un apellido válido</p>
    </ion-item>

    <ion-item>
      <ion-label floating color="primary">Fecha de Nacimiento</ion-label>
      <ion-datetime displayFormat="DD/MMMM/YYYY" formControlName="birthday" cancelText="Cancelar" doneText="Seleccionar" [(ngModel)]="RegisterFormData.birthday.text"
        [class.invalid]="!RegisterForm1.controls.birthday.valid && (RegisterForm1.controls.birthday.dirty || submitAttemptForm1)"
        [class.valid]="RegisterForm1.controls.birthday.valid"></ion-datetime>
      <ion-icon item-end name="md-calendar" color="primary"></ion-icon>
    </ion-item>
    <ion-item *ngIf="!RegisterForm1.controls.birthday.valid  && (RegisterForm1.controls.birthday.dirty || submitAttemptForm1)">
      <p class="error-message">Ingresa ingresa tu Fecha de Nacimiento</p>
    </ion-item>

    <ion-item>
      <ion-label floating color="primary">Sexo</ion-label>
      <ion-select interface="popover" formControlName="gender" [(ngModel)]="RegisterFormData.gender" [class.invalid]="!RegisterForm1.controls.gender.valid && (RegisterForm1.controls.gender.touched || submitAttemptForm1)"
        [class.valid]="RegisterForm1.controls.gender.valid">
        <ion-option value="female">Femenino</ion-option>
        <ion-option value="male">Masculino</ion-option>
      </ion-select>
      <ion-icon item-end name="transgender" color="primary"></ion-icon>
    </ion-item>
    <ion-item *ngIf="!RegisterForm1.controls.gender.valid  && (RegisterForm1.controls.gender.touched || submitAttemptForm1)">
      <p class="error-message">Selecciona tu Sexo</p>
    </ion-item>


    <ion-item>
      <ion-label floating color="primary">Teléfono Celular
        <span class="optional-input-label">(Diez Dígitos)</span>
      </ion-label>
      <ion-input type="tel" formControlName="phone" [(ngModel)]="RegisterFormData.phone" [class.invalid]="!RegisterForm1.controls.phone.valid && (RegisterForm1.controls.phone.dirty || submitAttemptForm1)"
        [class.valid]="RegisterForm1.controls.phone.valid"></ion-input>
      <ion-icon item-end name="phone-portrait" color="primary"></ion-icon>
    </ion-item>
    <ion-item *ngIf="!RegisterForm1.controls.phone.valid  && (RegisterForm1.controls.phone.dirty || submitAttemptForm1)">
      <p class="error-message">Ingresa un número de Teléfono válido</p>
    </ion-item>


    <ion-item>
      <ion-label floating color="primary">Estado</ion-label>
      <ion-select formControlName="state" [(ngModel)]="RegisterFormData.state" [class.invalid]="!RegisterForm1.controls.state.valid && (RegisterForm1.controls.state.touched || submitAttemptForm1)"
        [class.valid]="RegisterForm1.controls.state.valid" (ionChange)="selectState($event)">
        <ion-option [value]="e.nombre" *ngFor="let e of estados">{{e.nombre}}</ion-option>
      </ion-select>
      <ion-icon item-end name="md-map" color="primary"></ion-icon>
    </ion-item>
    <ion-item *ngIf="!RegisterForm1.controls.state.valid  && (RegisterForm1.controls.state.dirty || submitAttemptForm1)">
      <p class="error-message">Seleccione un estado</p>
    </ion-item>


    <ion-item>
      <ion-label floating color="primary">Ciudad o Municipio</ion-label>
      <ion-select formControlName="city" [(ngModel)]="RegisterFormData.city" [class.invalid]="!RegisterForm1.controls.city.valid && (RegisterForm1.controls.city.touched || submitAttemptForm1)"
        [class.valid]="RegisterForm1.controls.city.valid">
        <ion-option [value]="m" *ngFor="let m of municipios">{{m}}</ion-option>
      </ion-select>
      <ion-icon item-end name="md-map" color="primary"></ion-icon>
    </ion-item>
    <ion-item *ngIf="!RegisterForm1.controls.city.valid  && (RegisterForm1.controls.city.dirty || submitAttemptForm1)">
      <p class="error-message">Seleccione un municipio</p>
    </ion-item>

    <ion-item>
      <ion-label floating color="primary">Código Postal</ion-label>
      <ion-input formControlName="postal_code" [(ngModel)]="RegisterFormData.postal_code" type="tel" [class.invalid]="!RegisterForm1.controls.postal_code.valid && (RegisterForm1.controls.postal_code.touched || submitAttemptForm1)"
        [class.valid]="RegisterForm1.controls.postal_code.valid">
      </ion-input>
      <ion-icon item-end name="keypad" color="primary"></ion-icon>
    </ion-item>
    <ion-item *ngIf="!RegisterForm1.controls.postal_code.valid  && (RegisterForm1.controls.postal_code.dirty || submitAttemptForm1)">
      <p class="error-message">Ingresa un código postal válido</p>
    </ion-item>


    <ion-item>
      <ion-label floating color="primary">Correo Electrónico</ion-label>
      <ion-input type="email" formControlName="email" [(ngModel)]="RegisterFormData.email" [class.invalid]="!RegisterForm1.controls.email.valid && (RegisterForm1.controls.email.dirty || submitAttemptForm1)"
        [class.valid]="RegisterForm1.controls.email.valid"></ion-input>
      <ion-icon item-end name="md-at" color="primary"></ion-icon>
    </ion-item>
    <ion-item *ngIf="!RegisterForm1.controls.email.valid  && (RegisterForm1.controls.email.dirty || submitAttemptForm1)">
      <p class="error-message">Ingresa un correo eléctronico valido</p>
    </ion-item>

    <ion-item>
      <ion-label floating color="primary">Contraseña</ion-label>
      <ion-input type="password" formControlName="password" [(ngModel)]="RegisterFormData.password" [class.invalid]="!RegisterForm1.controls.password.valid && (RegisterForm1.controls.password.dirty || submitAttemptForm1)"
        [class.valid]="RegisterForm1.controls.password.valid"></ion-input>
      <ion-icon item-end name="md-lock" color="primary"></ion-icon>
    </ion-item>
    <ion-item *ngIf="!RegisterForm1.controls.password.valid  && (RegisterForm1.controls.password.dirty || submitAttemptForm1)">
      <p class="error-message">Ingresa una contraseña válida</p>
    </ion-item>

    <ion-item>
      <ion-label floating color="primary">Confirmar Contraseña</ion-label>
      <ion-input type="password" formControlName="confirmPassword" [(ngModel)]="RegisterFormData.confirmPassword" id="confirmPassword"
        [class.invalid]="(!RegisterForm1.controls.confirmPassword.valid && (RegisterForm1.controls.confirmPassword.dirty || submitAttemptForm1)) || (RegisterForm1.controls.confirmPassword.errors?.MatchPassword && RegisterFormData.confirmPassword)"
        [class.valid]="RegisterForm1.controls.confirmPassword.valid"></ion-input>
      <ion-icon item-end name="md-lock" color="primary"></ion-icon>
    </ion-item>
    <!--<ion-item *ngIf="!RegisterForm1.controls.confirmPassword.valid  && (RegisterForm1.controls.confirmPassword.dirty || submitAttemptForm1)">-->
    <!--<p class="error-message">Ingresa una contraseña válida</p>-->
    <!--</ion-item>-->
    <ion-item *ngIf="(!RegisterForm1.controls.confirmPassword.valid && (RegisterForm1.controls.confirmPassword.dirty || submitAttemptForm1)) || (RegisterForm1.controls.confirmPassword.errors?.MatchPassword && RegisterFormData.confirmPassword)">
      <p class="error-message">La contraseña no coincide</p>
    </ion-item>


    <ion-item>
      <div class="valid image-input-padding">
        <label color="primary" ion-text>Foto de Perfil</label>
        <br/>
        <!--<button ion-button (tap)="openImageOptions()" *ngIf="!RegisterFormData.profile_picture">-->
        <!--<ion-icon name="md-add-circle"></ion-icon>&nbsp;-->
        <!--Agregar-->
        <!--</button>      -->
        <div class="add-picture-image" text-center *ngIf="!RegisterFormData.profile_picture">
          <img src="assets/img/add-image.png" (tap)="openImageOptions()">
        </div>
        <div class="images-container" *ngIf="RegisterFormData.profile_picture">
          <img [src]="RegisterFormData.profile_picture">
          <ion-fab bottom right>
            <button ion-fab mini color="danger" (tap)="removeImage()">
              <ion-icon name="trash"></ion-icon>
            </button>
          </ion-fab>
        </div>
      </div>
      <!--<ion-icon item-end name="camera" color="primary"></ion-icon>-->
    </ion-item>
  </form>
  <br/>
  <div text-center>
    <button ion-button color="primary" round (tap)="updateUser()">
      Guardar&nbsp;
      <ion-icon name="md-arrow-forward"></ion-icon>
    </button>
  </div>
</ion-content>